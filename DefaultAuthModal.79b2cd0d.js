var f=Object.defineProperty,F=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var n=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;var a=(i,t,e)=>t in i?f(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,l=(i,t)=>{for(var e in t||(t={}))A.call(t,e)&&a(i,e,t[e]);if(n)for(var e of n(t))p.call(t,e)&&a(i,e,t[e]);return i},s=(i,t)=>F(i,w(t));import{P as h,a as g}from"./public-modal-mixin.eac7c504.js";import{n as _,E as u,i as d}from"./lesson.27384c0b.js";import{I as y,a as b,A as m,b as v,c as k,d as O,e as I,F as c,f as R,g as r}from"./flow-views.47afc7cc.js";const T={props:{config:{type:Object,default:()=>({key:"",data:{}})},loginAction:{type:Function,default:null,required:!1},additionalFields:{type:Object,default:()=>null}},name:"DefaultAuthModal",mixins:[h],components:{InformProductPrerecording:y,InformAccountRestored:b,AuthorizationDynamicFlow:m,AuthorizationByPasswordFlow:v,AuthorizationRestoreFlow:k,AuthorizationByCodeFlow:O,AuthorizationStaticFlow:I,PublicModalView:g},data(){return{currentFlow:null,subscriptions:null,loading:!1}},created(){this.config.key?this.currentFlow=this.config:this.currentFlow=c.STATIC_AUTHORIZATION,this.visible&&(this.isModalVisible=!0),this.subscriptions=[u.$on(`${d}_OPEN`,i=>{this.openModal(),i&&i.hasAttribute("data-tariff-id")&&(r.TariffId=i.getAttribute("data-tariff-id")),i&&i.hasAttribute("data-tariff-number")&&(r.multiplier=i.getAttribute("data-tariff-number")),i&&i.hasAttribute("data-webinar-tariff-id")&&(r.WebinarTariffId=i.getAttribute("data-webinar-tariff-id")),i&&i.hasAttribute("data-prerecording")&&i.hasAttribute("data-product-id")&&(r.loginAction=this.prerecordingLoginActionAfter.bind(this,i.getAttribute("data-product-id")),this.subscriptions.push(()=>{r.loginAction=null}))}),u.$on(`${d}_HIDE`,()=>{this.hideModal()})],this.loginAction&&(r.loginAction=this.loginAction,this.subscriptions.push(()=>{r.loginAction=null}))},methods:{prerecordingLoginActionAfter(...i){this.currentFlow=s(l({},c.PRODUCT_PRERECORDING),{data:{productId:i[0]||null}})},getFlowView(){return R[this.currentFlow.key]}},destroyed(){if(this.subscriptions)for(const i of this.subscriptions)i()}};var C=function(){var t=this,e=t._self._c;return e("div",{staticClass:"auth-modal"},[e("div",{staticClass:"hidden-field hidden-auth-handler",attrs:{"data-default-auth-handler":""},on:{click:t.openModal}}),e("public-modal-view",{directives:[{name:"show",rawName:"v-show",value:t.isModalVisible,expression:"isModalVisible"}],attrs:{"without-close":!!t.visible,flat:t.flat,"step-key":t.currentFlow.key,loading:t.loading},on:{close:t.hideModal}},[t.currentFlow.key==="STATIC_AUTHORIZATION"?e("AuthorizationStaticFlow",{key:t.currentFlow.key,attrs:{previous:t.currentFlow.previous,data:t.currentFlow.data,"additional-fields":t.additionalFields},on:{set:function(o){t.currentFlow=o},loading:function(o){t.loading=o}}}):t._e(),t.currentFlow.key==="AUTHORIZATION_BY_CODE"?e("AuthorizationByCodeFlow",{key:t.currentFlow.key,attrs:{previous:t.currentFlow.previous,data:t.currentFlow.data,"additional-fields":t.additionalFields},on:{set:function(o){t.currentFlow=o},loading:function(o){t.loading=o}}}):t._e(),t.currentFlow.key==="AUTHORIZATION_BY_PASSWORD"?e("AuthorizationByPasswordFlow",{key:t.currentFlow.key,attrs:{previous:t.currentFlow.previous,data:t.currentFlow.data,"additional-fields":t.additionalFields},on:{set:function(o){t.currentFlow=o},loading:function(o){t.loading=o}}}):t._e(),t.currentFlow.key==="RESTORE_ACCOUNT"?e("AuthorizationRestoreFlow",{key:t.currentFlow.key,attrs:{previous:t.currentFlow.previous,data:t.currentFlow.data,"additional-fields":t.additionalFields},on:{set:function(o){t.currentFlow=o},loading:function(o){t.loading=o}}}):t._e(),t.currentFlow.key==="DYNAMIC_FLOW"?e("AuthorizationDynamicFlow",{key:t.currentFlow.key,attrs:{previous:t.currentFlow.previous,data:t.currentFlow.data,"additional-fields":t.additionalFields},on:{set:function(o){t.currentFlow=o},loading:function(o){t.loading=o}}}):t._e(),t.currentFlow.key==="ACCOUNT_RESTORED"?e("InformAccountRestored",{key:t.currentFlow.key,attrs:{previous:t.currentFlow.previous,data:t.currentFlow.data,"additional-fields":t.additionalFields},on:{set:function(o){t.currentFlow=o},loading:function(o){t.loading=o}}}):t._e(),t.currentFlow.key==="PRODUCT_PRERECORDING"?e("InformProductPrerecording",{key:t.currentFlow.key,attrs:{previous:t.currentFlow.previous,data:t.currentFlow.data},on:{set:function(o){t.currentFlow=o},loading:function(o){t.loading=o}}}):t._e()],1)],1)},E=[],P=_(T,C,E,!1,null,null,null,null);const S=P.exports;export{S as D};
//# sourceMappingURL=DefaultAuthModal.79b2cd0d.js.map
