import{n as o,$ as s,a4 as a}from"./lesson.da911ca6.js";import{C as n}from"./CloseButtonLg.47f94002.js";import"./axios.98430d30.js";const r={props:{loading:{type:Boolean,default:!1},flat:{type:Boolean,default:!1},withoutClose:{type:Boolean,default:!1},largeCloseButton:{type:Boolean,default:!1},modalType:{type:String,default:"modal-registration"},stepKey:{type:String,default:""}},name:"PublicModalView",components:{CloseButtonLg:n,SpinLoader:s,CloseButtonSm:a},mounted(){const t=document.querySelector(`[data-id='${this._uid}']`);t&&new MutationObserver(()=>{this.$forceUpdate()}).observe(t,{attributes:!0,childList:!0,subtree:!0})},methods:{isLarge(){const t=document.querySelector(`[data-id='${this._uid}']`);return t?t.getBoundingClientRect().height>window.innerHeight-120:!1},handleOverlayClick(t){if(this.withoutClose||t.target!==t.currentTarget)return;const e=window.getSelection();e&&e.type==="Range"&&e.anchorNode&&e.anchorNode.parentNode.closest(".public-modal-view-content")||this.$emit("close")}},watch:{stepKey(){setTimeout(()=>{this.$forceUpdate()})}}};var d=function(){var e=this,l=e._self._c;return l("div",{class:{"public-modal-overlay":!e.flat},on:{click:e.handleOverlayClick}},[l("div",{ref:"view",staticClass:"public-modal-view custom-scroll",class:[{"public-modal-view_flat":e.flat,"public-modal-view_large":e.isLarge()},e.modalType],attrs:{"data-id":e._uid}},[e.loading?l("div",{staticClass:"public-modal-view__loader"},[l("SpinLoader",{attrs:{color:"#15A06E",width:40,"stroke-width":4}})],1):e._e(),l("div",{staticClass:"public-modal-view-content",class:{"public-modal-view-content_disabled":e.loading,"public-modal-view-content_flat":e.flat}},[e.withoutClose?e._e():[e.largeCloseButton?l("CloseButtonLg",{on:{close:function(i){return e.$emit("close")}}}):l("CloseButtonSm",{on:{close:function(i){return e.$emit("close")}}})],e._t("default")],2)])])},c=[],u=o(r,d,c,!1,null,"fbb0cdf4",null,null);const p=u.exports,_={props:{visible:{type:Boolean,default:!1,required:!1},flat:{type:Boolean,default:!1,required:!1}},data(){return{isModalVisible:!1,canBeClosed:!1}},methods:{toggleModalVisibility(){this.isModalVisible=!this.isModalVisible},toggleBluredContent(t){const e=document.querySelectorAll(".blured-content");e.length&&e.forEach(l=>{t?(l.classList.remove("blured"),this.visible||l.removeEventListener("click",this.bluredHandler)):(l.classList.add("blured"),this.visible||l.addEventListener("click",this.bluredHandler))})},bluredHandler(t){t.target.hasAttribute("data-default-auth-handler")||this.hideModal()},isPassword(){return this.fields.length&&this.fields[0].type==="password"&&this.fields[1]&&this.fields[1].type==="password_confirmation"},hideModal(){this.canBeClosed&&(this.isModalVisible=!1)},openModal(){this.isModalVisible=!0,this.closeDropdown()},closeDropdown(){document.querySelectorAll(".header__menu_item_dropdown").forEach(t=>{t.parentElement.classList.remove("active")}),document.body.classList.remove("open-menu"),document.querySelector(".header__menu")&&(document.querySelector(".header__menu").classList.remove("open"),document.querySelector(".header__menu").classList.remove("open-child"))}},watch:{isModalVisible(t){this.flat,t?setTimeout(()=>{this.canBeClosed=!0},1e3):this.canBeClosed=!1,this.$forceUpdate()}}};export{_ as P,p as a};
//# sourceMappingURL=public-modal-mixin.a7615b73.js.map
