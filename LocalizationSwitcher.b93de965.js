var _=(i,t,a)=>new Promise((e,c)=>{var o=s=>{try{n(a.next(s))}catch(r){c(r)}},u=s=>{try{n(a.throw(s))}catch(r){c(r)}},n=s=>s.done?e(s.value):Promise.resolve(s.value).then(o,u);n((a=a.apply(i,t)).next())});import{n as d,L as h,aq as g}from"./lesson.a44e2551.js";import{e as l}from"./axios.98430d30.js";import"./vendor.7bd6b934.js";import"./tiptap.5ae55db7.js";const w={name:"LocalizationSwitcher",components:{LoaderBlock:h},data:()=>({activeTab:"language",langsKeys:null,loading:!0,locales:null,currencies:null,currentCurrency:null,selectCurrencyLink:null,localApiPrefix:null}),props:{apiPrefix:{type:String,default:"",required:!1},currentLocale:{type:String,default:"",required:!1},additionalClass:{type:String,default:"",required:!1},isFlat:{type:Boolean,default:!1,required:!1}},mixins:[g],methods:{close(){this.$emit("close")},changeLanguage(i){window.location=`/locale/${i}`},setCurrencyLink(i){return`/currency/${i}`},getCurrencies(){return _(this,null,function*(){yield l.get(`${this.localApiPrefix}/currencies/main`).then(i=>{this.currencies=i.data.data}),window.current_currency?this.currentCurrency=window.current_currency:yield l.get(`${this.localApiPrefix}/currencies/current`).then(i=>{let t=i.data.data;this.currentCurrency=t}),this.currencies.find(i=>i.id===this.currentCurrency.id)||(this.currentCurrency=this.currencies[0])})}},created(){l.defaults.baseURL===this.apiPrefix?this.localApiPrefix="":this.localApiPrefix=this.apiPrefix,!l.defaults.baseURL&&!this.localApiPrefix&&(l.defaults.baseURL="/api/v1");let i=`${this.localApiPrefix}/languages`;l.get(window.cached_routes["translation-groups"],{params:{groups:"common",lang:window.app_current_locale},headers:{"X-Language":window.app_current_locale}}).then(t=>{this.langsKeys=t.data,l.get(i,{params:{locale:window.app_current_locale}}).then(a=>{this.locales=[a.data.data.find(e=>e.iso_2===this.currentLocale),...a.data.data.filter(e=>e.iso_2!==this.currentLocale)],this.getCurrencies(),this.loading=!1})})}};var f=function(){var t=this,a=t._self._c;return a("div",{staticClass:"localization-switcher",class:{"localization-switcher_flat":t.isFlat},on:{click:function(e){return e.target!==e.currentTarget?null:t.close.apply(null,arguments)}}},[t.loading?a("LoaderBlock"):a("div",{staticClass:"localization-switcher__modal",class:t.additionalClass},[a("div",{staticClass:"localization-switcher__modal-tabs-close"},[a("div",{staticClass:"localization-switcher__modal-tabs"},[a("div",{staticClass:"localization-switcher__modal-tab",class:{selected:t.activeTab==="language"},on:{click:function(e){t.activeTab="language"}}},[t._v(" "+t._s(t.t("common.language"))+" ")]),a("div",{staticClass:"localization-switcher__modal-tab",class:{selected:t.activeTab==="currency"},on:{click:function(e){t.activeTab="currency"}}},[t._v(" "+t._s(t.t("common.currency"))+" ")])]),t.isFlat?t._e():a("div",{staticClass:"localization-switcher__modal-close",on:{click:t.close}},[a("svg",{attrs:{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M0.834302 14.6001C0.584014 14.6001 0.417146 14.5167 0.250287 14.3498C-0.0834291 14.0161 -0.0834291 13.5155 0.250287 13.1818L13.1818 0.250287C13.5155 -0.0834291 14.0161 -0.0834291 14.3498 0.250287C14.6835 0.584004 14.6835 1.0846 14.3498 1.41832L1.41832 14.3498C1.25146 14.5167 1.00116 14.6001 0.834302 14.6001Z"}}),a("path",{attrs:{d:"M13.6824 14.6002C13.4321 14.6002 13.2653 14.5168 13.0984 14.3499L0.250287 1.50181C-0.0834291 1.1681 -0.0834291 0.6675 0.250287 0.333784C0.584004 6.69584e-05 1.0846 6.69584e-05 1.41832 0.333784L14.3498 13.2653C14.6835 13.599 14.6835 14.0996 14.3498 14.4333C14.0995 14.5168 13.9327 14.6002 13.6824 14.6002Z"}})])])]),t.activeTab==="language"?a("div",{staticClass:"localization-switcher__modal-content"},[a("div",{staticClass:"localization-switcher__title-switchers"},[a("div",{staticClass:"localization-switcher__title"},[t._v(t._s(t.t("common.select_language")))]),a("div",{staticClass:"localization-switcher__switchers localization-switcher__switchers_langs"},t._l(t.locales,function(e,c){return a("div",{key:c,staticClass:"localization-switcher__switcher",class:{selected:e.iso_2===t.currentLocale},on:{click:function(o){return t.changeLanguage(e.iso_2)}}},[e.original_name?[t._v(" "+t._s(e.original_name)+" ")]:t._e()],2)}),0)])]):t._e(),t.activeTab==="currency"?a("div",{staticClass:"localization-switcher__modal-content"},[a("div",{staticClass:"localization-switcher__title-switchers"},[a("div",{staticClass:"localization-switcher__title"},[t._v(t._s(t.t("common.select_currency")))]),a("div",{staticClass:"localization-switcher__switchers"},t._l(t.currencies,function(e,c){return a("a",{key:c,staticClass:"localization-switcher__switcher",class:{selected:e.id==t.currentCurrency.id},attrs:{href:t.setCurrencyLink(e.id)}},[a("div",[t._v(t._s(e.name))]),a("div",{staticClass:"localization-switcher__switcher-grey-label"},[t._v(" "+t._s(e.code)+" - "+t._s(e.html_code)+" ")])])}),0)])]):t._e()])],1)},v=[],m=d(w,f,v,!1,null,null,null,null);const x=m.exports;export{x as default};
//# sourceMappingURL=LocalizationSwitcher.b93de965.js.map
