var y=Object.defineProperty;var f=Object.getOwnPropertySymbols;var m=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var h=(i,e,t)=>e in i?y(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,c=(i,e)=>{for(var t in e||(e={}))m.call(e,t)&&h(i,t,e[t]);if(f)for(var t of f(e))b.call(e,t)&&h(i,t,e[t]);return i};var p=(i,e,t)=>new Promise((n,s)=>{var _=l=>{try{u(t.next(l))}catch(d){s(d)}},v=l=>{try{u(t.throw(l))}catch(d){s(d)}},u=l=>l.done?n(l.value):Promise.resolve(l.value).then(_,v);u((t=t.apply(i,e)).next())});import{i as o,D as g,d as C,n as $,c as a}from"./DefaultCountriesList.6979b2fb.js";import{n as r,bq as x,a5 as D,o as F}from"./lesson.a44015ca.js";import{C as M}from"./vendor.7bd6b934.js";const w={props:{iso2:{type:String,default:o}},name:"DefaultPhoneFlag",methods:{domain(){return window.app_subdomain_url_no_locale||"https://kwiga.com/"}}};var P=function(){var e=this,t=e._self._c;return t("div",{staticClass:"default-phone-flag"},[t("img",{attrs:{alt:e.iso2,loading:"lazy",src:`${e.domain()}build/img/flags/${e.iso2}.svg`}})])},V=[],S=r(w,P,V,!1,null,"3d1b3085",null,null);const k=S.exports;const I={name:"DefaultPhoneChevron"};var q=function(){var e=this,t=e._self._c;return t("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M5 8L10 13L15 8",stroke:"#3E4755","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})])},A=[],T=r(I,q,A,!1,null,"d3bba823",null,null);const B=T.exports;const E={components:{DefaultPhoneChevron:B,DefaultPhoneFlag:k},props:{iso2:{type:String,default:o},isActive:{type:Boolean,default:!1}},name:"DefaultPhoneHandler"};var H=function(){var e=this,t=e._self._c;return t("button",{staticClass:"default-phone-handler",class:{"default-phone-handler_active":e.isActive},attrs:{type:"button"},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),e.$emit("handle")}}},[e.iso2?t("DefaultPhoneFlag",{attrs:{iso2:e.iso2}}):t("div",{staticStyle:{width:"22px","background-color":"#eee",height:"22px","border-radius":"50%","margin-right":"4px"}}),t("DefaultPhoneChevron")],1)},L=[],j=r(E,H,L,!1,null,"ae302cba",null,null);const O=j.exports;const R={components:{ErrorsContainer:x,DefaultPhoneCountries:g,DefaultPhoneHandler:O,AlertWithQuestion:D,DefaultTitle:F},props:{defaultCode:{type:String,default:o},placeholder:{type:String,default:""},tooltip:{type:String,default:""},readonly:{type:Boolean,default:!1},uuid:{type:String,default:""},inputStyle:{type:Object,default:()=>{}},format:{type:[Object,Array],default:null},validation:{type:[Object,Array],default:null},value:{type:String,default:""},name:{type:String,default:"phone"},label:{type:String,default:""},required:{type:Boolean,default:!1},defaultValidation:{type:Boolean,default:!1},styleModifier:{type:String,default:""},errors:{type:Array,default:()=>[]}},model:{prop:"value",event:"update"},directives:{ClickOutside:M},name:"DefaultPhoneInput",data(){return{currentCountry:{iso2:o,dialCode:C,name:$},isModalVisible:!1,disableInsertion:!1,disableFocus:!0,focused:!1,defaults:{validation:null,format:null}}},created(){return p(this,null,function*(){this.defaultValidation&&(this.$set(this.defaults,"format",{default_country:{iso2:"auto",translate:"settings.users_country"},display_country:!0,include_countries:[],exclude_countries:[]}),this.$set(this.defaults,"validation",{color:"#DD4141",text:null,regex:"^[\\+0-9]{1,30}$",country_code_required:!1,check_phone:!1,min:null,max:null})),this.setDefaults()})},methods:{handleModalVisible(){this.readonly||(this.isModalVisible=!this.isModalVisible)},setDefaults(){var e,t;this.value&&this.value.length&&(this.disableInsertion=!0);const i=a.find(n=>{var s;return(s=this.value)==null?void 0:s.startsWith(`+${n.dialCode}`)});if(i)this.currentCountry=i;else if(this.visibleFormat&&this.visibleFormat.display_country)if(this.visibleFormat.default_country&&this.visibleFormat.default_country.iso2!=="auto")this.currentCountry=this.visibleFormat.default_country;else if(((t=(e=this.visibleFormat)==null?void 0:e.default_country)==null?void 0:t.iso2)==="auto"){const n=window.country?window.country.toLowerCase():this.defaultCode;this.currentCountry=a.find(s=>s.iso2===n)}else this.currentCountry=null;this.$nextTick(()=>{this.disableInsertion=!1,this.disableFocus=!1})},getStyles(){let i={borderColor:this.errors.length?this.visibleValidation&&this.visibleValidation.color:"#E0E0EC"};return this.inputStyle&&(i=c(c({},i),this.inputStyle)),delete i.padding,delete i.display,i},hideModal(){this.isModalVisible=!1}},computed:{visibleValidation(){return this.validation||this.defaults.validation},visibleFormat(){return this.format||this.defaults.format},phoneModel:{get(){return this.value},set(i){for(let t=0;t<a.length;t++)i.includes(`+${a[t].dialCode}`)&&(this.disableInsertion=!0,this.currentCountry=a[t],this.$nextTick(()=>{this.disableInsertion=!1}));const e=this.currentCountry&&`+${this.currentCountry.dialCode}`;if(this.visibleValidation&&this.visibleValidation.country_code_required&&this.currentCountry&&e&&this.value&&this.value.slice(0,e.length)===e&&i.length<this.value.length&&i.length<e.length&&e!==i&&!this.disableInsertion){i||this.$emit("update",e),this.$forceUpdate();return}this.$emit("update",i)}}},watch:{format:{deep:!0,handler(){this.setDefaults()}},currentCountry(i){i&&(this.isModalVisible&&this.hideModal(),this.disableInsertion||(this.phoneModel=`+${i.dialCode}`,this.disableFocus||this.$nextTick(()=>{this.$refs.input.focus()})))},isModalVisible(i){i&&setTimeout(()=>{const e=document.querySelector(".default-phone-county_active");e&&e.scrollIntoView()},0)}}};var z=function(){var e=this,t=e._self._c;return t("errors-container",{staticClass:"default-phone-input-container",attrs:{color:e.visibleValidation&&e.visibleValidation.color,errors:e.errors}},[t("div",{staticClass:"default-phone-input",class:[`default-phone-input_${e.styleModifier}`,{"default-phone-input_active":e.focused,"default-phone-input_error":e.errors.length,"default-phone-input_tooltip":e.tooltip}],style:e.getStyles()},[e.tooltip?t("alert-with-question",[t("default-title",{staticClass:"mb-5",attrs:{weight:500,size:14,"text-color":"#151515",inter:""}},[e._v(" "+e._s(e.label)+" ")]),t("default-title",{attrs:{inter:"",weight:400,"text-color":"#52565C"},domProps:{innerHTML:e._s(e.tooltip)}})],1):e._e(),e.label?t("div",{staticClass:"default-phone-input__label"},[e._v(e._s(e.label)),e.required?t("em",[e._v("*")]):e._e()]):e._e(),t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hideModal,expression:"hideModal"}],staticClass:"default-phone-input-handler-container",class:{"pointer-events-none":e.readonly}},[e.visibleFormat&&e.visibleFormat.display_country?t("DefaultPhoneHandler",{attrs:{iso2:e.currentCountry&&e.currentCountry.iso2,"is-active":e.isModalVisible},on:{handle:e.handleModalVisible}}):e._e(),t("transition",{attrs:{name:"fade-up"}},[e.isModalVisible?t("DefaultPhoneCountries",{attrs:{iso2:e.currentCountry&&e.currentCountry.iso2,exclude:e.visibleFormat&&e.visibleFormat.exclude_countries,include:e.visibleFormat&&e.visibleFormat.include_countries},on:{select:function(n){e.currentCountry=n}}}):e._e()],1)],1),e.required&&e.phoneModel?t("input",{staticClass:"form-input-validation",attrs:{type:"text",tabindex:"-1",required:e.required,name:e.name,disabled:e.readonly},domProps:{value:e.phoneModel.replaceAll(`${e.currentCountry&&e.currentCountry.dialCode&&`+${e.currentCountry.dialCode}`}`,"")}}):e._e(),t("input",{ref:"input",staticClass:"default-phone-input__input",style:{paddingLeft:e.visibleFormat&&e.visibleFormat.display_country?"9px":"0"},attrs:{readonly:e.readonly,id:`${e.uuid}-phone`,placeholder:e.placeholder,type:"text",name:e.name,autocomplete:"phone",disabled:e.readonly},domProps:{value:e.phoneModel},on:{blur:function(n){e.focused=!1},focus:function(n){e.focused=!0},input:function(n){e.phoneModel=n.target.value}}})],1)])},W=[],N=r(R,z,W,!1,null,"84a83f19",null,null);const K=N.exports;export{K as D};
//# sourceMappingURL=DefaultPhoneInput.57dea1b0.js.map
